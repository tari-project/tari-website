<!DOCTYPE html>
<html class="no-js">
  <head>

    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Tari Protocol Discussion 37</title>

<meta property="og:description" content="Tari is a new open source, decentralized protocol that reimagines the future of digital assets." />
<meta property="og:site_name" content="Tari" />
<meta property="og:title" content="Tari Protocol Discussion 37" />
<meta property="og:url" content="http://localhost:4000/2019/05/20/tari-protocol-discussion-37.html" />
<meta property="og:image" content="http://localhost:4000/tari-splash.png" />
<meta property="og:image:secure_url" content="http://localhost:4000/tari-splash.png" />
<meta property="og:type" content="website" />
  
<meta name="description" content="Tari is a new open source, decentralized protocol that reimagines the future of digital assets." />
<meta itemprop="name" content="Tari"/>
<meta itemprop="title" content="Tari Protocol Discussion 37" />
<meta itemprop="url" content="http://localhost:4000/2019/05/20/tari-protocol-discussion-37.html"/>
<meta itemprop="thumbnailUrl" content="http://localhost:4000/tari-splash.png"/>
<meta itemprop="image" content="http://localhost:4000/tari-splash.png" />
<link rel="image_src" href="http://localhost:4000/tari-splash.png" />
  
<meta name="twitter:site" content="Tari">
<meta name="twitter:title" content="Tari Protocol Discussion 37"/>
<meta name="twitter:url" content="http://localhost:4000/2019/05/20/tari-protocol-discussion-37.html"/>
<meta name="twitter:image" content="http://localhost:4000/tari-splash.png"/>
<meta name="twitter:card" content="summary"/>

<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

<!-- CSS -->
<link rel="stylesheet" href="/css/owl.carousel.css" />
<link rel="stylesheet" href="/css/bootstrap.min.css" />
<link rel="stylesheet" href="/css/avenir-std.css" />
<link rel="stylesheet" href="/css/font-awesome.min.css" />
<link rel="stylesheet" href="/css/airspace.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/ionicons.min.css" />
<link rel="stylesheet" href="/css/animate.css" />
<link rel="stylesheet" href="/css/responsive.css" />
<link rel="stylesheet" href="/css/syntax.css" />

<!-- Js -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/plugins.js"></script>
<script src="/js/min/rellax.min.js"></script>
<script src="/js/min/waypoints.min.js"></script>
<script src="/js/jquery.counterup.js"></script>

<script src="/js/main.js"></script>

<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b04a80b744e1cff"></script>



<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-115476091-1', 'auto');
    ga('send', 'pageview');
</script>


  </head>
  <body class="page-">


    <!-- Header Start -->
<header>
<div class="container">
  <div class="row">
    <!-- header Nav Start -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header col-md-4">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <span class="visible-xs-inline visible-sm-inline"><svg class="logo--gem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71.1"><path d="M29.1 0L0 18.9v19.8L28.9 71 70 38.8V18.9L29.1 0zM29.7 8L63 23.4V32L12.7 19 29.7 8zM32.5 31.4l26.8 6.9L32.5 59.3V31.4zM7 24.8l18.5 4.7v27.1L7 36V24.8z"/></svg></span>
            <svg class="logo--wordmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.3 18"><path d="M21.1 0L15 18h3.9l1.3-4.2h5.3l1.3 4.2h3.9L24.6 0H21.1zM21.2 10.5l1.6-5.4 1.6 5.4H21.2z"/><rect x="49.6" width="3.6" height="18"/><path d="m40 11.1c3.3-0.2 5.2-2.2 5.2-5.5 0-3.5-2.1-5.5-5.7-5.5h-6.8v18h3.6v-5.6l5 5.6h4.7l-6.2-6.9 0.2-0.1zm-3.6-3.4v-4.3h3.1c1.4 0 2.1 0.8 2.1 2.2s-0.7 2.2-2.1 2.2h-3.1z"/><polygon points="6.1 18 9.7 18 9.7 3.4 15.8 3.4 15.8 0 0 0 0 3.4 6.1 3.4"/></svg>

          </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse col-md-8" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Documentation
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <ul>
                          <li><a class="dropdown-item" href="#">Installation guide</a></li>
                          <li> <a class="dropdown-item" href="https://rfc.tari.com/" target="_blank">Tari RFC</a></li>
                      </ul>


                  </div>
              </li>
            <li><a href="https://www.github.com/tari-project" target="_blank">Source code </a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
  </div>
</div>
</header><!-- header close -->



    <div class="post">

  <div class="container">
  <div class="row">
    <div class="col-md-8">

      <div class="post-img" style="background-image:url(/img/posts/protocol-discussion-37.png)">
          <img src="/img/posts/placeholder-spacer.gif" />
      </div>

      <div class="post-head">
        <h1>Tari Protocol Discussion 37</h1>
        <div class="row">
          <div class="col-sm-6">
            <div class="post-meta">
              <strong class="post-author">Tari Team</strong>
              <p class="post-date">May 20, 2019</p>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="addthis_inline_share_toolbox"></div>
          </div>
        </div>
      </div>

      <!-- Wrapper Start -->
      <section id="post">
        <div class="block">
          
          <p>On Monday, the Tari community discussed the Validator Node registration. Below is the TL;DR on Monday’s conversation (full transcript included below):</p>

<ul>
  <li>Require some timelocked funds to be sybil resistant</li>
  <li>It needs to be renewable</li>
  <li>Validator nodes require random IDs</li>
</ul>

<p>Join us for our next discussion on Freenode in #tari-dev.</p>

<p>Discussion times proposed by the Tari community:</p>

<p><strong>Mondays: 6pm CAT (12pm EST)</strong></p>

<p><strong>Thursdays: 11am CAT (5am EST)</strong></p>

<p>To keep up with the latest Tari developments, you can follow the project on <a href="https://twitter.com/tari">Twitter</a>.</p>

<h3 id="transcript-of-thursdays-discussion">Transcript of Thursday’s discussion</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>18:09 &lt;Hansie&gt;  Hi there
18:10 &lt;Hansie&gt;  We have not discussed VN registration in a long time
18:11 &lt;Hansie&gt;  That would be `RFC-0322: Validator Node Registration`
18:11 &lt;Hansie&gt;  Anyone care to discuss?
18:12 &lt;simian_za&gt;  Sho, it has been a while. I suppose it will be worth revisiting now that we have spent more time on the base layer stuff
18:12 &lt;Hansie&gt;  Yip
18:13 &lt;simian_za&gt;  So the goal of the registration was to tie a VNs identity to a base layer transaction with a cost that mitigates Sybil attacks right?
18:14 &lt;Hansie&gt;  Yes, that sounds about right.
18:14 &lt;neonknight64&gt;  and to obtain a node ID for the communication layer
18:14 &lt;simian_za&gt;  We didn't want the registration fee to be paid to anyone in particular, we just wanted to tie it up so it cannot be spent for a certain period
18:16 &lt;Hansie&gt;  So let us continue with `Assumptions - VN Registration: `, then `Assumptions - Game theory` and lastly `Use cases:`. Is that a plan?
18:16 &lt;neonknight64&gt;  we also need a mechanism to allow the registration to be renewed.
18:16 &lt;stanimal&gt;  How long would that be locked up for?
18:17 &lt;Hansie&gt;  We previously had suggestions of fixed term (e.g. 6 months)
18:18 &lt;simian_za&gt;  And this registration can be used for the VN to participate in multiple assets?
18:20 &lt;Hansie&gt;  Yes, I think so. The amount and time-lock period could be confirmed with modelling  -  'Network Analysis'
18:21 &lt;stanimal&gt;  I would say so, that would allow them on the network and allow them to be discoverable
18:22 &lt;simian_za&gt;  Cool, well if it allows for reuse then 6 months seems reasonable
18:22 &lt;stanimal&gt;  ^ Join the network as a VN, they would still be able to join the network (as a wallet?) to pay the registration fee presumably
18:23 &lt;simian_za&gt;  What do you mean by wallet? We can't expect end-users with asset wallets to have to register in this way?
18:24 &lt;simian_za&gt;  Hansie: I feel it might be more useful to start with the `Use cases` so why know what functionality we need this process to serve
18:25 &lt;neonknight64&gt;  Stanimal, I believe the wallet will be a separate entity with its own node id,  but the wallet can pay the registration fees on behalf of the VN allowing the VN to join with the registered node id
18:25 &lt;stanimal&gt;  Well it's a bit of a chicken and egg situation, in order to obtain your NodeID to be a VN on the network, you'll need some way to pay the registration and claim your NodeID
18:26 &lt;simian_za&gt;  but the payment happens on the base layer where NodeIDs can be chosen by the wallets?
18:26 &lt;stanimal&gt;  Yup, guess this could be part of the VN software
18:27 &lt;neonknight64&gt;  Wallets do not propagate messages and can derive a node id from the its identification public key
18:28 &lt;neonknight64&gt;  no base layer registration needed
18:28 &lt;simian_za&gt;  Ok, so the purpose of VNs registering in this way is to secure a NodeID for use on the second layer that is not chosen or derived by their wallet but by the base layer network making it much more secure
18:29 &lt;simian_za&gt;  they need this kind of NodeID if they want to participate in DAN committees
18:29 &lt;stanimal&gt;  Join as a wallet, pay the registration, obtain the NodeId and rejoin with the new NodeId - correct, the base layer is a random oracle
18:31 &lt;simian_za&gt;  So that's really the main use case here, is to make sure that the NodeID that they are using when accepting and sending messages as part of an Asset committee comes from a NodeID that was fairly chosen by the random oracle
18:31 &lt;Hansie&gt;  Makes sense
18:32 &lt;Blackwolfsa&gt;  It's only the VNs that need that random ID right? 
18:32 &lt;simian_za&gt;  it needs to cost something so that its expensive to try "mine" a NodeID for malicious purposes
18:33 &lt;Hansie&gt;  I would say properly registered and identifiable, not really 'fairly chosen by the random oracle'
18:33 &lt;stanimal&gt;  Exactly, prevent adaptive join/leave attacks and help randomize network topology - which benefits the network as a whole (base layer included)
18:33 &lt;simian_za&gt;  well it is though, maybe not fairly but it was produced by the random oracle. Thus the NodeID they receive will be "random"
18:34 &lt;simian_za&gt;  so nix the word "fairly"
18:34 &lt;Hansie&gt;  Ok, understood
18:34 &lt;Hansie&gt;  Blackwolfsa: What else could need the random ID?
18:35 &lt;simian_za&gt;  I can't think of another entity right now that would need the random NodeID
18:35 &lt;neonknight64&gt;  Blackwolf.. Wallets, Token Wallets, Base Nodes and Validator Nodes need random ids
18:35 &lt;neonknight64&gt;  but only VNs need to register for them
18:35 &lt;Blackwolfsa&gt;  Why would they need random ID? 
18:35 &lt;Blackwolfsa&gt;  They could chose their own ids they just need to be unique? 
18:36 &lt;stanimal&gt;  However, all except VNs are currently trusted to create a random ID
18:36 &lt;simian_za&gt;  the registration process is the only way to ensure the NodeID is properly random. It would be ideal for them all to properly random though but can't really be enforeced
18:37 &lt;stanimal&gt;  Ye without some kind of enforceable distributed RNG
18:37 &lt;simian_za&gt;  Blackwolfsa: an attacker can chose NodeIDs in a malicious way to do things like eclipse a victim but ja can't really be enforced. The VNs are actually our best defense against this
18:37 &lt;neonknight64&gt;  I think every entity should have an identification key pair and a node id derived from this key pair or obtained from registering
18:38 &lt;Hansie&gt;  So the registration UTXO will be time-locked and mined in the base layer... and that process will be used to identify/create the VN ID?
18:38 &lt;simian_za&gt;  Hansie: Yes
18:38 &lt;Hansie&gt;  So what happens when the lock expires?
18:38 &lt;stanimal&gt;  neonknight64 That would mean a cost for anyone joining the network?
18:39 &lt;Blackwolfsa&gt;  I think we need to allow them to extend the registration 
18:40 &lt;Blackwolfsa&gt;  But if that expires they should be seen as unregistered 
18:40 &lt;stanimal&gt;  oh nm, reread your comment - keypair OR registration ;)
18:40 &lt;simian_za&gt;  I guess they can spend that UTXO, how will they be able to maintain their registration to keep their NodeID?
18:40 &lt;simian_za&gt;  Maybe we should define what metadata the UTXO has? It is not just a plain mimblewimble UTXO
18:41 &lt;Hansie&gt;  Yes. Maybe the registration UTXO can be spent only if it is a re-commitment to an increased term; any other spend will not be allowed. If it lapses the VN is out of action.
18:43 &lt;neonknight64&gt;  Can that be done using some for of consensus rule or script?
18:43 &lt;Hansie&gt;  neonknight64: Can the VN ID be determined before the Tx is mined?
18:43 &lt;neonknight64&gt;  form*
18:44 &lt;neonknight64&gt;  hansie, do you mean NodeID? No the NodeID cannot be determined before the time
18:44 &lt;neonknight64&gt;  it must be mined
18:44 &lt;simian_za&gt;  Hansie: that is a good point...the NodeID will need to be derived from some data involved in mining the transaction
18:44 &lt;simian_za&gt;  so how can it be included in the metadata?
18:45 &lt;Hansie&gt;  Great, so the VN nodeID cannot be part of the meta data :-)
18:46 &lt;simian_za&gt;  hmm that's tricky. We can't reference the first tx if we try extend the timelock because of tx pruning...
18:46 &lt;neonknight64&gt;  I original NodeID could maybe be in the metadata when the registration is renewed as the new block will produce a different NodeID
18:46 &lt;simian_za&gt;  How will someone be able to verify the NodeID if the original tx gets pruned?
18:48 &lt;neonknight64&gt;  Not sure, but an invalid renewal should not appear in the base layer if the NodeID transfer is incorrect.
18:48 &lt;Hansie&gt;  So we can have (a) time-lock (b) type=VN registration (c) counter for consecutive registrations (d) previous nodeID (e) ...
18:48 &lt;Blackwolfsa&gt;  Yes but we need to be able to verify that
18:50 &lt;Hansie&gt;  A registration UTXO can only be spent/renewed by the owner as the only person that can open that commitment
18:51 &lt;Hansie&gt;  Miners can validate the counter and link to the previous UTXO
18:51 &lt;simian_za&gt;  Ok so another aspect of the UTXO will also be that a 3rd party needs to be able to verify the amount that is locked up
18:52 &lt;simian_za&gt;  Hanise, but the previous UTXO will be pruned eventually
18:52 &lt;Hansie&gt;  That one is potentially tricky
18:53 &lt;Hansie&gt;  Yes, so the current UTXO identifies the previous UTXO and times the registration has been carried forward
18:55 &lt;simian_za&gt;  Hmmm, going to have to ponder this some more
18:57 &lt;Hansie&gt;  Agreed
18:57 &lt;simian_za&gt;  Obviously, we could just ensure that these kind of TXs are not pruned but that is not ideal at all
19:01 &lt;Blackwolfsa&gt;  But I think we should try out at best to avoid that
19:05 &lt;stanimal&gt;  This may be dumb, but couldn't you hash the kernel for the nodeID - since there will be a base layer fee the miners choose the blinding factor making the kernel random each time (i.e not chosen by the VN)
19:09 &lt;Blackwolfsa&gt;  But then it changes every time if I understand you correctly 
19:10 &lt;simian_za&gt;  Could reference the first kernel some how, that doesn't get pruned
19:11 &lt;Blackwolfsa&gt;  That could work.. 
</code></pre></div></div>

        </div>
      </section>

    </div>
  </div>
</div>
</div>

<!-- Call to action Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <a class="btn btn-lg" href="/blog">Back to blog</a>
                </div>
            </div>
        </div>
    </div>
</section>










    <!-- footer Start -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-1">

        <svg class="logo--gem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71.1"><path d="M29.1 0L0 18.9v19.8L28.9 71 70 38.8V18.9L29.1 0zM29.7 8L63 23.4V32L12.7 19 29.7 8zM32.5 31.4l26.8 6.9L32.5 59.3V31.4zM7 24.8l18.5 4.7v27.1L7 36V24.8z"/></svg>

      </div>
      <div class="col-md-5">

        <h1>Built in <strong>Oakland</strong> &amp; <strong>Johannesburg</strong></h1>

        <form id="email_signup" class=" klaviyo_bare_embed_L5CjJF" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
  <input type="hidden" name="g" value="L5CjJF">
  <div class="klaviyo_messages">
    <div class="success_message" style="display:none;"></div>
    <div class="error_message" style="display:none;"></div>
  </div>
  <div class="klaviyo_field_group">
    <label for="k_id_email">Newsletter Sign Up</label>
    <input type="email" value="" name="email" id="k_id_email" placeholder="Enter email" />
  </div>
  <div class="klaviyo_form_actions">
    <button type="submit" class="btn btn-lg klaviyo_submit_button">Submit</button>
  </div>
  <p class="privacy-agreement">By clicking ‘Submit’, you agree to our <a href="/privacy_policy" title="Privacy Policy" target="_blank">Privacy Policy</a>.</p>
</form>
<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>
<script type="text/javascript">
  KlaviyoSubscribe.attachToForms('#email_signup', {
    hide_form_on_success: true
  });
</script>

        <p>Copyright &copy; 2018 Tari Labs, LLC. All rights reserved.<br/>
          <a href="/privacy_policy">Privacy Policy</a>&nbsp;
          <a href="/disclaimer">Disclaimer</a>.
        </p>

      </div>
      <div class="col-md-6">
        <div class="footer-menu clearfix">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs">Docs</a></li>
            <li><a href="https://rfc.tari.com/" target="_blank">Tari RFC</a></li>
            <li><a href="https://www.github.com/tari-project" target="_blank">Source code</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div>
        <div class="footer-socials">
          <ul class="social-icons">
            <li><a href="https://www.twitter.com/tari" target="_blank"><i class="ion-social-twitter"></i></a></li>
            <li><a href="https://www.facebook.com/tarilabs" target="_blank"><i class="ion-social-facebook"></i></a></li>
            <li><a href="https://www.reddit.com/r/tari" target="_blank"><i class="ion-social-reddit"></i></a></li>
            <li><a href="https://www.github.com/tari-project" target="_blank"><i class="ion-social-github"></i></a></li>
            <li><a href="https://t.me/tarilab" target="_blank"><i class="ion-paper-airplane"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>


    </body>
</html>
