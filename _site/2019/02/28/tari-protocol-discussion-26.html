<!DOCTYPE html>
<html class="no-js">
  <head>

    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Tari Protocol Discussion 26</title>

<meta property="og:description" content="Tari is a new open source, decentralized protocol that reimagines the future of digital assets." />
<meta property="og:site_name" content="Tari" />
<meta property="og:title" content="Tari Protocol Discussion 26" />
<meta property="og:url" content="http://localhost:4000/2019/02/28/tari-protocol-discussion-26.html" />
<meta property="og:image" content="http://localhost:4000/tari-splash.png" />
<meta property="og:image:secure_url" content="http://localhost:4000/tari-splash.png" />
<meta property="og:type" content="website" />
  
<meta name="description" content="Tari is a new open source, decentralized protocol that reimagines the future of digital assets." />
<meta itemprop="name" content="Tari"/>
<meta itemprop="title" content="Tari Protocol Discussion 26" />
<meta itemprop="url" content="http://localhost:4000/2019/02/28/tari-protocol-discussion-26.html"/>
<meta itemprop="thumbnailUrl" content="http://localhost:4000/tari-splash.png"/>
<meta itemprop="image" content="http://localhost:4000/tari-splash.png" />
<link rel="image_src" href="http://localhost:4000/tari-splash.png" />
  
<meta name="twitter:site" content="Tari">
<meta name="twitter:title" content="Tari Protocol Discussion 26"/>
<meta name="twitter:url" content="http://localhost:4000/2019/02/28/tari-protocol-discussion-26.html"/>
<meta name="twitter:image" content="http://localhost:4000/tari-splash.png"/>
<meta name="twitter:card" content="summary"/>

<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

<!-- CSS -->
<link rel="stylesheet" href="/css/owl.carousel.css" />
<link rel="stylesheet" href="/css/bootstrap.min.css" />
<link rel="stylesheet" href="/css/avenir-std.css" />
<link rel="stylesheet" href="/css/font-awesome.min.css" />
<link rel="stylesheet" href="/css/airspace.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/ionicons.min.css" />
<link rel="stylesheet" href="/css/animate.css" />
<link rel="stylesheet" href="/css/responsive.css" />
<link rel="stylesheet" href="/css/syntax.css" />

<!-- Js -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/plugins.js"></script>
<script src="/js/min/rellax.min.js"></script>
<script src="/js/min/waypoints.min.js"></script>
<script src="/js/jquery.counterup.js"></script>

<script src="/js/main.js"></script>

<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b04a80b744e1cff"></script>



<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-115476091-1', 'auto');
    ga('send', 'pageview');
</script>


  </head>
  <body class="page-">


    <!-- Header Start -->
<header>
<div class="container">
  <div class="row">
    <!-- header Nav Start -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header col-md-4">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <span class="visible-xs-inline visible-sm-inline"><svg class="logo--gem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71.1"><path d="M29.1 0L0 18.9v19.8L28.9 71 70 38.8V18.9L29.1 0zM29.7 8L63 23.4V32L12.7 19 29.7 8zM32.5 31.4l26.8 6.9L32.5 59.3V31.4zM7 24.8l18.5 4.7v27.1L7 36V24.8z"/></svg></span>
            <svg class="logo--wordmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.3 18"><path d="M21.1 0L15 18h3.9l1.3-4.2h5.3l1.3 4.2h3.9L24.6 0H21.1zM21.2 10.5l1.6-5.4 1.6 5.4H21.2z"/><rect x="49.6" width="3.6" height="18"/><path d="m40 11.1c3.3-0.2 5.2-2.2 5.2-5.5 0-3.5-2.1-5.5-5.7-5.5h-6.8v18h3.6v-5.6l5 5.6h4.7l-6.2-6.9 0.2-0.1zm-3.6-3.4v-4.3h3.1c1.4 0 2.1 0.8 2.1 2.2s-0.7 2.2-2.1 2.2h-3.1z"/><polygon points="6.1 18 9.7 18 9.7 3.4 15.8 3.4 15.8 0 0 0 0 3.4 6.1 3.4"/></svg>

          </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse col-md-8" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Documentation
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <ul>
                          <li><a class="dropdown-item" href="#">Installation guide</a></li>
                          <li> <a class="dropdown-item" href="https://rfc.tari.com/" target="_blank">Tari RFC</a></li>
                      </ul>


                  </div>
              </li>
            <li><a href="https://www.github.com/tari-project" target="_blank">Source code </a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
  </div>
</div>
</header><!-- header close -->



    <div class="post">

  <div class="container">
  <div class="row">
    <div class="col-md-8">

      <div class="post-img" style="background-image:url(/img/posts/protocol-discussion-26.png)">
          <img src="/img/posts/placeholder-spacer.gif" />
      </div>

      <div class="post-head">
        <h1>Tari Protocol Discussion 26</h1>
        <div class="row">
          <div class="col-sm-6">
            <div class="post-meta">
              <strong class="post-author">Tari Team</strong>
              <p class="post-date">February 28, 2019</p>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="addthis_inline_share_toolbox"></div>
          </div>
        </div>
      </div>

      <!-- Wrapper Start -->
      <section id="post">
        <div class="block">
          
          <p>On Thursday, the Tari community gathered to analyze different ways to make sure the high-performance second layer of the Tari network (The DAN) could leverage the high security of the base layer. Below is the TL;DR on Thursday’s conversation (full transcript included below):</p>

<p>One way to achieve a high security second layer is to require Validator Nodes to register themselves on the Base layer. This achieves:</p>

<ul>
  <li>Sybil resistance (if we require a fee / deposit to be paid)</li>
  <li>A register of known VNs</li>
</ul>

<p>At a high level, the registration process could look something like this:</p>

<ul>
  <li>The Validator Node posts a MW transaction with a flag marking it as a VN registration TX.</li>
  <li>The tx contains a time-locked output for at least the registration fee amount that is <em>paid back to the VN owner</em></li>
  <li>This time lock could be for say, 6 months</li>
</ul>

<p>Another great thing about the refundable deposit model of registration is that the Active VN register is self-maintaining. You need to re-register every 6 months (ala SSL certificates) rather than requiring de-registration.</p>

<p>Join us for our next discussion on Freenode in #tari-dev.</p>

<p>Discussion times proposed by the Tari community:</p>

<p><strong>Mondays: 6pm CAT (11am EST)</strong></p>

<p><strong>Thursdays: 11am CAT (4am EST)</strong></p>

<p>To keep up with the latest Tari developments, you can follow the project on <a href="https://twitter.com/tari">Twitter</a>.</p>

<h3 id="transcript-of-thursdays-discussion">Transcript of Thursday’s discussion</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4:00 AM &lt;@cjs77&gt; time for another dev chat :)
4:03 AM &lt;simian_za&gt; awesome, lets chat
4:09 AM &lt;@cjs77&gt; So if we imagine the base layer being a high trust, low performance layer; and the DAN being a high performance, lower trust layer; it makes sense to leverage the Base Layer where possible to effect high trust, high performance on the DAN.
4:10 AM &lt;@cjs77&gt; One way to do this is to require Validator Nodes to register themselves on the Base layer
4:11 AM &lt;@cjs77&gt; This achieves:
4:11 AM &lt;@cjs77&gt; i) Sybil resistance (if we require a fee / deposit to be paid)
4:11 AM &lt;@cjs77&gt; ii) A register of known VNs
4:14 AM &lt;simian_za&gt; Makes sense, could the deposit be used for anything else i.e. losing it could be a penalty for bad behaviour (determined via consensus)?
4:14 AM &lt;simian_za&gt; Or is punishment of this sort poor design?
4:14 AM &lt;@cjs77&gt; On a high level, I imagine registration going something like this:
4:14 AM &lt;@cjs77&gt; * The VN posts a MW transaction with a flag marking it as a VN registration TX.
4:14 AM &lt;@cjs77&gt; * The tx contains a time-locked output  for at least the  registration fee amount that is *paid back to the VN owner*
4:14 AM &lt;@cjs77&gt; * This time lock could be for say, 6 months
4:15 AM &lt;@cjs77&gt; simian_za: Great Q. I think the challenge is how to implement punishment in an elegant and simple way
4:15 AM → bordecraft joined (~bordecraf@37.165.118.246)
4:16 AM &lt;@cjs77&gt; I like Bob McElrath's tweet from a few weeks ago saying that any slashing / punishment mechanism can be gamed. I'm not sure I agree 100%, but I resonate with the sentiment. Rather let it "just work" through clever incentives
4:16 AM ⇐ bordecraft quit (~bordecraf@37.165.118.246) Client Quit
4:17 AM &lt;Blackwolfsa&gt; yip I agree with that, we should try and make it work without punishment
4:17 AM &lt;simian_za&gt; The challenge with any punishment mechanism is that it can be used maliciously.
4:17 AM &lt;@cjs77&gt; As it is, posting a refundable deposit via a time-locked output achieves Sybil resistance, which is a big step already
4:18 AM &lt;simian_za&gt; How will the fee be determined?
4:18 AM → bordecraft joined (~bordecraf@37.165.118.246)
4:19 AM &lt;Blackwolfsa&gt; Does it have to be timelocked?
4:19 AM &lt;@cjs77&gt; What I also love about the refundable deposit model is that the Active VN register is self-maintaining. You need to *re-register* every 6 months (ala SSL certificates) rather than requiring de-registration.
4:19 AM &lt;@cjs77&gt; blackwolfsa: ^^ is why time locks are highly desirable
4:19 AM &lt;Blackwolfsa&gt; As long as it exists, the node is"registered", if the node spends that utxo, the node is "de-registered"
4:20 AM &lt;@cjs77&gt; simian_za: Another good Q
4:20 AM &lt;neonknight&gt; The hash of the registration location could also be used as unique identifier for a VN
4:21 AM &lt;Blackwolfsa&gt; cjs77: for that to work we have to either check that the registration is newer than 6 months or something
4:22 AM &lt;Blackwolfsa&gt; a dormant node wont spend that as well.
4:22 AM &lt;@cjs77&gt; blackwolfsa: Having an auto-spend in 6 months guarantees that we get a check-in from a VN if they want to stay registered. If a VN operator loses interest and doesn't care about his deposit, it should auto-deregister, no?
4:23 AM &lt;simian_za&gt; How will an Auto-spend/Auto-refund work though?
4:23 AM &lt;simian_za&gt; will the transaction sit in the mempool?
4:24 AM &lt;neonknight&gt; Also not sure how to do an auto spend with mimblewimble
4:24 AM &lt;@cjs77&gt; yeah, it would have to sit in the mempool.
4:25 AM &lt;Blackwolfsa&gt; 6 months sitting in the mempool might does not seem very reliable.
4:25 AM &lt;Blackwolfsa&gt; I think its safer to just check how old his utxo is.
4:25 AM &lt;@cjs77&gt; So I reckon there would need to be 2 txs: One locking the output, and one that hangs around.
4:25 AM &lt;@cjs77&gt; &gt;not very reliable
4:25 AM &lt;@cjs77&gt; perhaps - fair comment
4:25 AM &lt;simian_za&gt; So rather when an Asset Creator is looking for VN's he will ignore registrations that are older than 6 months
4:26 AM &lt;Blackwolfsa&gt; If we need to check how old his utxo is, we might as well remove the timelock
4:26 AM &lt;simian_za&gt; so a VN cannot use his old registration to take part in DAN activity
4:27 AM &lt;Blackwolfsa&gt; Yes, its not ideal, but its better than flooding the VN list with inactive VN's
4:27 AM &lt;@cjs77&gt; The timelock must stay -- otherwise it's cheap to run a VN, do something nasty, shut it down, get a refund; and repeat
4:27 AM &lt;simian_za&gt; Also a VN could register, get picked for a committee and then deregister and repeat
4:28 AM &lt;simian_za&gt; all with the same deposit amount
4:28 AM &lt;@cjs77&gt; The auto-refund is debateable; but the timelock is crucial for sybil resistance
4:28 AM &lt;Blackwolfsa&gt; ok makes sense
4:28 AM &lt;neonknight&gt; Agreed, timelock is important
4:30 AM &lt;neonknight&gt; If the deposit is high enough, inactive VNs wont forget to release the deposit
4:30 AM &lt;@cjs77&gt; Yeah, I guess we can't *force* auto-deregistration
4:31 AM &lt;simian_za&gt; you sort of can if you ignore old registrations for all the listing and validation operations
4:33 AM &lt;@cjs77&gt; So the question of how much to lock up. I don't know the answer, but some things to think about:
4:33 AM &lt;@cjs77&gt; * needs to be high enough to make Sybil attacks expensive
4:33 AM &lt;@cjs77&gt; * needs to be low enough to produce a "reasonable return" for VN operators running VNs as a business
4:33 AM &lt;@cjs77&gt; * high enough to encourage dormant VNs to claim the deposit ASAP
4:34 AM &lt;simian_za&gt; That is going to be a moving target as the value of Tari fluctuates
4:34 AM &lt;@cjs77&gt; sure
4:34 AM &lt;simian_za&gt; Can it be a function of the amount of Tari in circulation?
4:35 AM &lt;simian_za&gt; hmm but that doesn't take into account the market value
4:36 AM &lt;neonknight&gt; A function of mining reward could also be considered.
4:37 AM &lt;Hansie&gt; simian_za : Yes, and any direct link with fiat currency will be volatile
4:38 AM &lt;Blackwolfsa&gt; mining fee's should stay kinda in line with fiat
4:40 AM &lt;Hansie&gt; Yes, and therefor somewhat self regulated, but not so the block reward
4:45 AM &lt;simian_za&gt; So a function of fees does make sense. Though keeping track of the average fees in a decentralized manner is a challenge
4:46 AM &lt;Hansie&gt; cjs77: I am wondering about a registration term of say 6 months. Let's say I am an asset creator, looking to appoint VNs in a "permissionless" network appointed manner with some boundary conditions I specify for them. These could be some minimum collateral amount, some network credibility rating and "time-to-live" (i.e. time till auto de-registration). So I would like to know how many "terms" have been served, are they light
4:46 AM &lt;Hansie&gt; weight or heavy weight VNs and how long I can depend on them. Any ideas?
4:48 AM &lt;Blackwolfsa&gt; avg fee's should be easy to calc = (reward-block reward) /  kernels
4:48 AM &lt;Blackwolfsa&gt; and we have some rolling limit of the avg between the last 10 blocks
4:50 AM &lt;Hansie&gt; Maybe the amount of collateral above a certain threshold could be self determined, thus market regulated.
4:52 AM &lt;Hansie&gt; Do we envisage a method whereby a VN can extend its registration window, for example renew it some time before it becomes invalid?
4:52 AM &lt;@cjs77&gt; Hansie: I think those are important questions, but possibly independent of the VN registration process? Personally I think VN metrics will probably be a second layer function
4:55 AM &lt;Hansie&gt; Yes, agreed not all for base layer. So maybe a mechanism to top up collateral, extend the registration window, and build up some sort of embedded track record?
4:58 AM &lt;Blackwolfsa&gt; extending could be easy, one reg-utxo --&gt;&gt; another reg-utxo
4:58 AM &lt;Blackwolfsa&gt; we could allow the properties like id etc to cary over
4:59 AM ⇐ bordecraft quit (~bordecraf@37.165.118.246) Ping timeout: 250 seconds
5:04 AM &lt;Hansie&gt; Yes, makes sense. So this could also take care of topping up the collateral, as the new Tx can combine the old collateral with a new input, or making it less.
5:07 AM &lt;Hansie&gt; So maybe the 'VN registration TX' could also employ a simple counter in the registration meta data that increases every time a re-registration is done without a lapse in active service?
5:16 AM ↔ oneiric_ nipped out  
5:18 AM &lt;mikethetike&gt; &gt; yeah, it would have to sit in the mempool
5:18 AM &lt;mikethetike&gt; I think it has to be on the blockchain, but locked up like a coinbase
5:18 AM &lt;mikethetike&gt; No autospend, although the VN could choose to create the autospend if they wished
5:19 AM &lt;mikethetike&gt; The registration can't actually be in the mempool, because then the locked up funds are not confirmed
5:19 AM &lt;mikethetike&gt; Unless I'm wrong
5:20 AM &lt;mikethetike&gt; or I have misunderstood what the registration tx is
5:21 AM — mikethetike reads previous messages 
5:30 AM &lt;neonknight&gt; registration is on baselayer, but autospending needs to live in mempool
</code></pre></div></div>

        </div>
      </section>

    </div>
  </div>
</div>
</div>

<!-- Call to action Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <a class="btn btn-lg" href="/blog">Back to blog</a>
                </div>
            </div>
        </div>
    </div>
</section>










    <!-- footer Start -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-1">

        <svg class="logo--gem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71.1"><path d="M29.1 0L0 18.9v19.8L28.9 71 70 38.8V18.9L29.1 0zM29.7 8L63 23.4V32L12.7 19 29.7 8zM32.5 31.4l26.8 6.9L32.5 59.3V31.4zM7 24.8l18.5 4.7v27.1L7 36V24.8z"/></svg>

      </div>
      <div class="col-md-5">

        <h1>Built in <strong>Oakland</strong> &amp; <strong>Johannesburg</strong></h1>

        <form id="email_signup" class=" klaviyo_bare_embed_L5CjJF" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
  <input type="hidden" name="g" value="L5CjJF">
  <div class="klaviyo_messages">
    <div class="success_message" style="display:none;"></div>
    <div class="error_message" style="display:none;"></div>
  </div>
  <div class="klaviyo_field_group">
    <label for="k_id_email">Newsletter Sign Up</label>
    <input type="email" value="" name="email" id="k_id_email" placeholder="Enter email" />
  </div>
  <div class="klaviyo_form_actions">
    <button type="submit" class="btn btn-lg klaviyo_submit_button">Submit</button>
  </div>
  <p class="privacy-agreement">By clicking ‘Submit’, you agree to our <a href="/privacy_policy" title="Privacy Policy" target="_blank">Privacy Policy</a>.</p>
</form>
<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>
<script type="text/javascript">
  KlaviyoSubscribe.attachToForms('#email_signup', {
    hide_form_on_success: true
  });
</script>

        <p>Copyright &copy; 2018 Tari Labs, LLC. All rights reserved.<br/>
          <a href="/privacy_policy">Privacy Policy</a>&nbsp;
          <a href="/disclaimer">Disclaimer</a>.
        </p>

      </div>
      <div class="col-md-6">
        <div class="footer-menu clearfix">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs">Docs</a></li>
            <li><a href="https://rfc.tari.com/" target="_blank">Tari RFC</a></li>
            <li><a href="https://www.github.com/tari-project" target="_blank">Source code</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div>
        <div class="footer-socials">
          <ul class="social-icons">
            <li><a href="https://www.twitter.com/tari" target="_blank"><i class="ion-social-twitter"></i></a></li>
            <li><a href="https://www.facebook.com/tarilabs" target="_blank"><i class="ion-social-facebook"></i></a></li>
            <li><a href="https://www.reddit.com/r/tari" target="_blank"><i class="ion-social-reddit"></i></a></li>
            <li><a href="https://www.github.com/tari-project" target="_blank"><i class="ion-social-github"></i></a></li>
            <li><a href="https://t.me/tarilab" target="_blank"><i class="ion-paper-airplane"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>


    </body>
</html>
