<!DOCTYPE html>
<html class="no-js">
  <head>

    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Tari Protocol Discussion 5</title>

<meta property="og:description" content="Tari is a new open source, decentralized protocol that reimagines the future of digital assets." />
<meta property="og:site_name" content="Tari" />
<meta property="og:title" content="Tari Protocol Discussion 5" />
<meta property="og:url" content="http://localhost:4000/2018/11/09/tari-protocol-discussion-5.html" />
<meta property="og:image" content="http://localhost:4000/tari-splash.png" />
<meta property="og:image:secure_url" content="http://localhost:4000/tari-splash.png" />
<meta property="og:type" content="website" />
  
<meta name="description" content="Tari is a new open source, decentralized protocol that reimagines the future of digital assets." />
<meta itemprop="name" content="Tari"/>
<meta itemprop="title" content="Tari Protocol Discussion 5" />
<meta itemprop="url" content="http://localhost:4000/2018/11/09/tari-protocol-discussion-5.html"/>
<meta itemprop="thumbnailUrl" content="http://localhost:4000/tari-splash.png"/>
<meta itemprop="image" content="http://localhost:4000/tari-splash.png" />
<link rel="image_src" href="http://localhost:4000/tari-splash.png" />
  
<meta name="twitter:site" content="Tari">
<meta name="twitter:title" content="Tari Protocol Discussion 5"/>
<meta name="twitter:url" content="http://localhost:4000/2018/11/09/tari-protocol-discussion-5.html"/>
<meta name="twitter:image" content="http://localhost:4000/tari-splash.png"/>
<meta name="twitter:card" content="summary"/>

<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

<!-- CSS -->
<link rel="stylesheet" href="/css/owl.carousel.css" />
<link rel="stylesheet" href="/css/bootstrap.min.css" />
<link rel="stylesheet" href="/css/avenir-std.css" />
<link rel="stylesheet" href="/css/font-awesome.min.css" />
<link rel="stylesheet" href="/css/airspace.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/ionicons.min.css" />
<link rel="stylesheet" href="/css/animate.css" />
<link rel="stylesheet" href="/css/responsive.css" />
<link rel="stylesheet" href="/css/syntax.css" />

<!-- Js -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/plugins.js"></script>
<script src="/js/min/rellax.min.js"></script>
<script src="/js/min/waypoints.min.js"></script>
<script src="/js/jquery.counterup.js"></script>

<script src="/js/main.js"></script>

<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b04a80b744e1cff"></script>



<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-115476091-1', 'auto');
    ga('send', 'pageview');
</script>


  </head>
  <body class="page-">


    <!-- Header Start -->
<header>
<div class="container">
  <div class="row">
    <!-- header Nav Start -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header col-md-4">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <span class="visible-xs-inline visible-sm-inline"><svg class="logo--gem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71.1"><path d="M29.1 0L0 18.9v19.8L28.9 71 70 38.8V18.9L29.1 0zM29.7 8L63 23.4V32L12.7 19 29.7 8zM32.5 31.4l26.8 6.9L32.5 59.3V31.4zM7 24.8l18.5 4.7v27.1L7 36V24.8z"/></svg></span>
            <svg class="logo--wordmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.3 18"><path d="M21.1 0L15 18h3.9l1.3-4.2h5.3l1.3 4.2h3.9L24.6 0H21.1zM21.2 10.5l1.6-5.4 1.6 5.4H21.2z"/><rect x="49.6" width="3.6" height="18"/><path d="m40 11.1c3.3-0.2 5.2-2.2 5.2-5.5 0-3.5-2.1-5.5-5.7-5.5h-6.8v18h3.6v-5.6l5 5.6h4.7l-6.2-6.9 0.2-0.1zm-3.6-3.4v-4.3h3.1c1.4 0 2.1 0.8 2.1 2.2s-0.7 2.2-2.1 2.2h-3.1z"/><polygon points="6.1 18 9.7 18 9.7 3.4 15.8 3.4 15.8 0 0 0 0 3.4 6.1 3.4"/></svg>

          </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse col-md-8" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Documentation
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <ul>
                          <li><a class="dropdown-item" href="#">Installation guide</a></li>
                          <li> <a class="dropdown-item" href="https://rfc.tari.com/" target="_blank">Tari RFC</a></li>
                      </ul>


                  </div>
              </li>
            <li><a href="https://www.github.com/tari-project" target="_blank">Source code </a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
  </div>
</div>
</header><!-- header close -->



    <div class="post">

  <div class="container">
  <div class="row">
    <div class="col-md-8">

      <div class="post-img" style="background-image:url(/img/posts/protocol-discussion-5.png)">
          <img src="/img/posts/placeholder-spacer.gif" />
      </div>

      <div class="post-head">
        <h1>Tari Protocol Discussion 5</h1>
        <div class="row">
          <div class="col-sm-6">
            <div class="post-meta">
              <strong class="post-author">Tari Team</strong>
              <p class="post-date">November 09, 2018</p>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="addthis_inline_share_toolbox"></div>
          </div>
        </div>
      </div>

      <!-- Wrapper Start -->
      <section id="post">
        <div class="block">
          
          <p>Yesterday, the Tari community discussed the trade-offs needed for the Tari protocol’s second layer. Speed, decentralization, and security are all opposing forces, and yesterday’s discussion was about balancing each component.</p>

<p>This is the TL;DR of yesterday’s conversation (full transcript included below):</p>

<p>Speed vs. decentralization trade-off</p>
<ul>
  <li>Every second layer node doesn’t need to execute every asset’s instructions (instructions refer to digital asset state changes)</li>
  <li>Speed is valuable for digital assets — even if it comes at the expense of some second layer decentralization</li>
</ul>

<p>Syncing first and second layers by invoking collateral requirements</p>
<ul>
  <li>Helps punish bad actors</li>
  <li>Makes it expensive to run a sybil attack</li>
  <li>How long should collateral be locked up?</li>
</ul>

<p>Join us for our next discussion on Freenode in #tari-dev.
Discussion times proposed by the Tari community:</p>

<p><strong>Mondays: 8pm CAT (1pm EST)</strong>
<strong>Thursdays: 11am CAT (4am EST)</strong></p>

<p>To keep up with the latest Tari developments, you can follow the project on <a href="https://twitter.com/tari">Twitter</a>.</p>

<h3 id="transcript-of-todays-discussion">Transcript of today’s discussion</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10:07 AM &lt;@cjs77&gt; Onto the architecture discussion; we seem to be converging on this idea of a MimbleWimble base layer merge-mined with Monero; and a fast second layer handling digital assets
10:14 AM &lt;simian_za&gt; Has there been any thought to the options for BFT on the second layer. Which ones are “fast”?
10:17 AM &lt;@cjs77&gt; On the 2nd layer, there’s no need for every 2nd-layer node to validate every instruction wrt to every digital asset that exists on the network. I’d argue that it’s a necessary (and desirable tbh) trade off to offer up some decentralisation to gain speed. With that said, what about this (very rough) idea:
10:17 AM &lt;@cjs77&gt; — A user/wallet submits an instruction to the network (Transfer 100 Tari to (output) for this token on DA #ta123)
10:17 AM &lt;@cjs77&gt; — A 2nd-layer node picks up the instruction and looks up in a hash table that it’s keeping in sync with it’s peers, which Nodes are responsible for executing transactions for that asset
10:17 AM &lt;@cjs77&gt; — It relays the instruction (via the messaging layer, which might go via Tor, I2P, or whatever) to those node(s).
10:17 AM &lt;@cjs77&gt; — The node(s) execute the instruction and reach consensus on the new state for DA #ta123 (consensus mechanism TBD)
10:17 AM &lt;@cjs77&gt; — Every so often, 2nd-layer nodes bundle up the asset state into a merkle tree and post a checkpoint transaction onto the base layer
10:19 AM &lt;Blackwolfsa&gt; I believe we need to look at some kind of “offline” solution here for speed, because we are looking at very high throughput for some scenarios we cant rely on the slow speed of the blockchain for each transaction
10:19 AM &lt;@fluffypony&gt; offline as in?
10:21 AM &lt;Blackwolfsa&gt; Not requiring input from the blockchain each time. I am thinking perhaps almost like lightning network operates, but not in a channel between 2 peer’s but more than that
10:21 AM &lt;@cjs77&gt; I forgot to mention In Step 2, the node would have to check that the Tari transfer is a valid base layer transaction too. This leads to a question around payment channels on the 2nd layer, since if there’s a ~1:1 Tari transaction for each asset instruction, that won’t scale if every Tari tx has to be reflected on the base layer.
10:21 AM &lt;@cjs77&gt; balckwolfsa: you mean offchain :)
10:21 AM &lt;simian_za&gt; So how do nodes indicate they are responsible for processing a specific DA? Do they opt in on certain assets or does the network dish the responsibility out?
10:23 AM &lt;mikethetike&gt; Maybe something like how the tor hidden services have a meeting point?
10:23 AM &lt;neonknight&gt; If multiple 2nd layer nodes can provide a verifiable history of a token, then you probably do not have to query the block chain
10:24 AM &lt;@cjs77&gt; In the early days, I wouldn’t be surprised if asset issuers would want the ability to authorise specific nodes to handle their assets; so we should support that. But we should also introduce a mechanism for nodes to opt in in some way so that Tari is also a permissionless network
10:24 AM &lt;Blackwolfsa&gt; yes, but you need to have a way of dealing with funds. Someone needs to pay some fee for modify/transfer of tokens. Those require tari, which requires base layer
10:26 AM &lt;Blackwolfsa&gt; @cjs77, @mikethetike, what about either you chose your own specific nodes(on their keys), or the network choses specific nodes for you(in some non deterministic way)?
10:26 AM &lt;mikethetike&gt; With the second layer running out of step with the first layer, the fees might need to be prepaid/locked up before you can invoke second layer actions
10:27 AM &lt;Blackwolfsa&gt; That would be fine with for example tickets. We know they will be redeemed once, so we can lock those up before hand with the ticket. But what about transfer or modify
10:28 AM &lt;tk___&gt; will the node opt-in include some sort of Tari token staking?
10:28 AM &lt;mikethetike&gt; It has to be expensive to 51% attack an asset on the second layer
10:30 AM &lt;mikethetike&gt; so staking could work (although staking sounds like proof of stake, which is different)
10:30 AM &lt;neonknight&gt; Staking is important, it should be expensive enough to limit bad players from spawning many bad nodes but cheap enough so you have multiple nodes storing the same data to create redundancy.
10:32 AM &lt;tk___&gt; I was thinking of this vector: DA1 chooses Node2 &amp; Node4. Node4 says he is available to handle the asset, a few mins after DA1 chooses Node4, the node suddenly disappears. Leaving DA1 with eggface
10:33 AM &lt;tk___&gt; mikethetike: maybe we call it something else then so it doesn’t sound like POS 😋
10:34 AM &lt;mikethetike&gt; let’s call it bail money :D
10:34 AM &lt;havik&gt; collateral :)
10:35 AM &lt;simian_za&gt; collateral is good
10:35 AM &lt;@cjs77&gt; tk: DA1 needs to trust the nodes though, right?. Permissioned networks are not trustless.
10:38 AM &lt;mikethetike&gt; I think for the simple hobbiest wanting to earn some fees, they will just download a 2nd node binary and select a bunch of assets from a select box
10:38 AM &lt;tk___&gt; ok true. But whether trustless or trust(ful?), is Tari thinking of staki……collateral?
10:40 AM &lt;simian_za&gt; So collateral has two uses, punishing a detected bad actor but also, as neonknight said, making it expensive to conduct a sybil attack
10:42 AM &lt;Hansie&gt; The assets on the 2nd layer should only go live when there has been a valid transaction to the base layer confirming the conditions, i.e. which 2nd layer nodes will serve the asset, bonded contracts between the asset issuer and the 2nd layer nodes, etc. So even the simple hobbiest will have to pay something.
10:44 AM &lt;neonknight&gt; tk.. the “slow” base layer will use PoW, while the “fast” 2nd layer will use Collateral locked using the bonded contracts
10:44 AM &lt;tk___&gt; 👍
10:47 AM &lt;mikethetike&gt; So does the asset issuer choose how much collateral is needed for the nodes to process their asset?
10:48 AM &lt;Blackwolfsa&gt; I think so yes?
10:48 AM &lt;simian_za&gt; Will need to make it easy for them so will need to express some sort of risk profile based on the value of the assets in question
10:51 AM &lt;simian_za&gt; Will probably also be a trade off of how much risk they want to take (i.e. the number of nodes that need to validate every instruction on their asset and the amount of collateral they have put up) vs the speed at which an asset needs to be processed
10:52 AM &lt;mikethetike&gt; I assume this will be time based?
10:52 AM &lt;simian_za&gt; Now that is an interesting point…consensus on time in a distributed network is a bit tricky…
10:53 AM &lt;mikethetike&gt; otherwise eventually the fees I’m earning are above my collateral
10:53 AM &lt;mikethetike&gt; I meant more like, after a few months, my stake is returned to me
10:54 AM &lt;mikethetike&gt; and I have to put down collateral again
10:54 AM &lt;mikethetike&gt; potentially at a higher price
10:55 AM &lt;simian_za&gt; hmm does the fact that you have made a profit (more fees earned that collateral) reduce the disincentive of losing your collateral? That would be a relative thing vs how much you total capital is and we cannot know that.
10:55 AM &lt;simian_za&gt; if you have 1 000 000 tari in the bank and the collateral was 100 tari, you earn 110 tari in fees. Is the disincentive much less?
10:58 AM &lt;neonknight&gt; For how long should the Collateral be locked, the lifetime of an asset? Probably ok for tickets but not for game assets..
10:58 AM &lt;Blackwolfsa&gt; colleteral should be more than the fees, risk /reward should be &gt; 1
11:01 AM &lt;@cjs77&gt; neonknight: assuming the notion of asset lifetime is clearly defined, I’d argue collateral is locked up for lifetime + ΔT
11:02 AM &lt;@cjs77&gt; ΔT might be a few weeks or months — the right amount of time is something that needs to be modelled
11:02 AM &lt;Blackwolfsa&gt; we could always do checkpoint + ΔT
</code></pre></div></div>

        </div>
      </section>

    </div>
  </div>
</div>
</div>

<!-- Call to action Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <a class="btn btn-lg" href="/blog">Back to blog</a>
                </div>
            </div>
        </div>
    </div>
</section>










    <!-- footer Start -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-1">

        <svg class="logo--gem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71.1"><path d="M29.1 0L0 18.9v19.8L28.9 71 70 38.8V18.9L29.1 0zM29.7 8L63 23.4V32L12.7 19 29.7 8zM32.5 31.4l26.8 6.9L32.5 59.3V31.4zM7 24.8l18.5 4.7v27.1L7 36V24.8z"/></svg>

      </div>
      <div class="col-md-5">

        <h1>Built in <strong>Oakland</strong> &amp; <strong>Johannesburg</strong></h1>

        <form id="email_signup" class=" klaviyo_bare_embed_L5CjJF" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
  <input type="hidden" name="g" value="L5CjJF">
  <div class="klaviyo_messages">
    <div class="success_message" style="display:none;"></div>
    <div class="error_message" style="display:none;"></div>
  </div>
  <div class="klaviyo_field_group">
    <label for="k_id_email">Newsletter Sign Up</label>
    <input type="email" value="" name="email" id="k_id_email" placeholder="Enter email" />
  </div>
  <div class="klaviyo_form_actions">
    <button type="submit" class="btn btn-lg klaviyo_submit_button">Submit</button>
  </div>
  <p class="privacy-agreement">By clicking ‘Submit’, you agree to our <a href="/privacy_policy" title="Privacy Policy" target="_blank">Privacy Policy</a>.</p>
</form>
<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>
<script type="text/javascript">
  KlaviyoSubscribe.attachToForms('#email_signup', {
    hide_form_on_success: true
  });
</script>

        <p>Copyright &copy; 2018 Tari Labs, LLC. All rights reserved.<br/>
          <a href="/privacy_policy">Privacy Policy</a>&nbsp;
          <a href="/disclaimer">Disclaimer</a>.
        </p>

      </div>
      <div class="col-md-6">
        <div class="footer-menu clearfix">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs">Docs</a></li>
            <li><a href="https://rfc.tari.com/" target="_blank">Tari RFC</a></li>
            <li><a href="https://www.github.com/tari-project" target="_blank">Source code</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div>
        <div class="footer-socials">
          <ul class="social-icons">
            <li><a href="https://www.twitter.com/tari" target="_blank"><i class="ion-social-twitter"></i></a></li>
            <li><a href="https://www.facebook.com/tarilabs" target="_blank"><i class="ion-social-facebook"></i></a></li>
            <li><a href="https://www.reddit.com/r/tari" target="_blank"><i class="ion-social-reddit"></i></a></li>
            <li><a href="https://www.github.com/tari-project" target="_blank"><i class="ion-social-github"></i></a></li>
            <li><a href="https://t.me/tarilab" target="_blank"><i class="ion-paper-airplane"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>


    </body>
</html>
