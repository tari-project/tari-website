<!DOCTYPE html>
<html class="no-js">
  <head>

    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Tari Protocol Discussion 14</title>

<meta property="og:description" content="Tari is a new open source, decentralized protocol that reimagines the future of digital assets." />
<meta property="og:site_name" content="Tari" />
<meta property="og:title" content="Tari Protocol Discussion 14" />
<meta property="og:url" content="http://localhost:4000/2018/12/21/tari-protocol-discussion-14.html" />
<meta property="og:image" content="http://localhost:4000/tari-splash.png" />
<meta property="og:image:secure_url" content="http://localhost:4000/tari-splash.png" />
<meta property="og:type" content="website" />
  
<meta name="description" content="Tari is a new open source, decentralized protocol that reimagines the future of digital assets." />
<meta itemprop="name" content="Tari"/>
<meta itemprop="title" content="Tari Protocol Discussion 14" />
<meta itemprop="url" content="http://localhost:4000/2018/12/21/tari-protocol-discussion-14.html"/>
<meta itemprop="thumbnailUrl" content="http://localhost:4000/tari-splash.png"/>
<meta itemprop="image" content="http://localhost:4000/tari-splash.png" />
<link rel="image_src" href="http://localhost:4000/tari-splash.png" />
  
<meta name="twitter:site" content="Tari">
<meta name="twitter:title" content="Tari Protocol Discussion 14"/>
<meta name="twitter:url" content="http://localhost:4000/2018/12/21/tari-protocol-discussion-14.html"/>
<meta name="twitter:image" content="http://localhost:4000/tari-splash.png"/>
<meta name="twitter:card" content="summary"/>

<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

<!-- CSS -->
<link rel="stylesheet" href="/css/owl.carousel.css" />
<link rel="stylesheet" href="/css/bootstrap.min.css" />
<link rel="stylesheet" href="/css/avenir-std.css" />
<link rel="stylesheet" href="/css/font-awesome.min.css" />
<link rel="stylesheet" href="/css/airspace.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/ionicons.min.css" />
<link rel="stylesheet" href="/css/animate.css" />
<link rel="stylesheet" href="/css/responsive.css" />
<link rel="stylesheet" href="/css/syntax.css" />

<!-- Js -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/plugins.js"></script>
<script src="/js/min/rellax.min.js"></script>
<script src="/js/min/waypoints.min.js"></script>
<script src="/js/jquery.counterup.js"></script>

<script src="/js/main.js"></script>

<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b04a80b744e1cff"></script>



<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-115476091-1', 'auto');
    ga('send', 'pageview');
</script>


  </head>
  <body class="page-">


    <!-- Header Start -->
<header>
<div class="container">
  <div class="row">
    <!-- header Nav Start -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header col-md-4">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <span class="visible-xs-inline visible-sm-inline"><svg class="logo--gem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71.1"><path d="M29.1 0L0 18.9v19.8L28.9 71 70 38.8V18.9L29.1 0zM29.7 8L63 23.4V32L12.7 19 29.7 8zM32.5 31.4l26.8 6.9L32.5 59.3V31.4zM7 24.8l18.5 4.7v27.1L7 36V24.8z"/></svg></span>
            <svg class="logo--wordmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.3 18"><path d="M21.1 0L15 18h3.9l1.3-4.2h5.3l1.3 4.2h3.9L24.6 0H21.1zM21.2 10.5l1.6-5.4 1.6 5.4H21.2z"/><rect x="49.6" width="3.6" height="18"/><path d="m40 11.1c3.3-0.2 5.2-2.2 5.2-5.5 0-3.5-2.1-5.5-5.7-5.5h-6.8v18h3.6v-5.6l5 5.6h4.7l-6.2-6.9 0.2-0.1zm-3.6-3.4v-4.3h3.1c1.4 0 2.1 0.8 2.1 2.2s-0.7 2.2-2.1 2.2h-3.1z"/><polygon points="6.1 18 9.7 18 9.7 3.4 15.8 3.4 15.8 0 0 0 0 3.4 6.1 3.4"/></svg>

          </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse col-md-8" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Documentation
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <ul>
                          <li><a class="dropdown-item" href="#">Installation guide</a></li>
                          <li> <a class="dropdown-item" href="https://rfc.tari.com/" target="_blank">Tari RFC</a></li>
                      </ul>


                  </div>
              </li>
            <li><a href="https://www.github.com/tari-project" target="_blank">Source code </a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
  </div>
</div>
</header><!-- header close -->



    <div class="post">

  <div class="container">
  <div class="row">
    <div class="col-md-8">

      <div class="post-img" style="background-image:url(/img/posts/protocol-discussion-14.png)">
          <img src="/img/posts/placeholder-spacer.gif" />
      </div>

      <div class="post-head">
        <h1>Tari Protocol Discussion 14</h1>
        <div class="row">
          <div class="col-sm-6">
            <div class="post-meta">
              <strong class="post-author">Tari Team</strong>
              <p class="post-date">December 21, 2018</p>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="addthis_inline_share_toolbox"></div>
          </div>
        </div>
      </div>

      <!-- Wrapper Start -->
      <section id="post">
        <div class="block">
          
          <p>Monday’s architecture discussion was a debate on the optimal block size and block time for Tari’s base layer to support its second layer ‘digital assets network’. The key questions up for debate included:</p>

<ul>
  <li>What is the minimum viable block interval for Tari’s base layer?</li>
  <li>How might block propagation time constrain the possible range of block intervals?</li>
  <li>How should the Tari protocol balance the speed requirements of the second layer ‘digital assets network’ with block orphan rates?</li>
  <li>Should the base layer have a ‘transactions per second’ upper limit?</li>
</ul>

<p>The full discussion introduced many possible block implementations including a proposal for a testnet experiment to ascertain the optimal block interval &amp; size. After the architecture discussion, this <a href="https://medium.facilelogin.com/the-mystery-behind-block-time-63351e35603a?gi=a4ffa0c4fa20">Medium article</a> and this <a href="https://drive.google.com/file/d/12zNSpyoaA5avTiTVngK6wSEmtB3eA2Kt/view">Bitcoin data</a> was presented on Freenode to help the Tari community understand the fundamentals of block times and network latency.</p>

<p>Join us for our next discussion on Freenode in #tari-dev.</p>

<p>Discussion times proposed by the Tari community:</p>

<p><strong>Mondays: 8pm CAT (1pm EST)</strong></p>

<p><strong>Thursdays: 11am CAT (4am EST)</strong></p>

<p>To keep up with the latest Tari developments, you can follow the project on <a href="https://twitter.com/tari">Twitter</a>.</p>

<h3 id="transcript-of-mondays-discussion">Transcript of Monday’s discussion</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1:04 PM &lt;@cjs77&gt; fluffypony: Does the dynamic blocksize work well in Monero? How often has it been tested (i.e. have there been sustained periods of full blocks?)
1:07 PM &lt;@cjs77&gt; Clearly the **correct** way to have this debate is to haggle over it for 2 years; get some suits to pick a side, then have a user uprising to force the status quo; and then hard fork away to TariFV (Fluffy’s vision). But we don’t have that much time, so hopefully we can come to broad consensus in a few days ;)
1:09 PM &lt;simian_za&gt; Optimistic, if it could be done that way surely someone would have tried it already?
1:10 PM &lt;moneromooo&gt; There was an attack which required such a sustained high traffic period. The increase worked. That was before a lot of the recent related changes though.
1:10 PM &lt;moneromooo&gt; The best way to test it is to run testnet locally with a couple daemons, and spam away.
1:10 PM &lt;@cjs77&gt; And can you share why Monero switched to 2min block intervals from 1min?
1:11 PM &lt;moneromooo&gt; And maybe mine with 45% of the hash keeping empty blocks, and 55% mining default rules blocks.
1:11 PM &lt;moneromooo&gt; s/maybe/probably/
1:12 PM &lt;moneromooo&gt; The block target thing was to decrease orphan rate, and also size to some extent.
1:12 PM &lt;moneromooo&gt; Maybe other reasons, pony might know/remember.
1:13 PM &lt;mikethetike&gt; the limiting factors on minimizing the block interval in my mind are: 1. The time to broadcast across the entire network. 2. The number of transactions bundled together for privacy
1:14 PM &lt;mikethetike&gt; too low a block time and there will be higher possiblity of chain splits
1:14 PM &lt;mikethetike&gt; but also, there will be sparse blocks
1:15 PM &lt;mikethetike&gt; not sure if that is as big a problem for mw as it is for ring sigs
1:17 PM &lt;mikethetike&gt; but I’m no monero expert, so disregard if I’m talking rubbish
1:18 PM &lt;@cjs77&gt; I think ideally we’d want 1min blocks (or quicker) to support the 2nd layer (digital assets network); there have been huge strides in BTC to improve network propagation times. IIRC BlueMatt saying on some podcast that FIBRE has brought this down to a few seconds
1:19 PM &lt;simian_za&gt; Is there a rust implementation of FIBRE?
1:19 PM &lt;@cjs77&gt; ha ha
1:19 PM &lt;@cjs77&gt; I’m sure it’s next on Matt’s list after Lightning-Rust :&gt;
1:20 PM &lt;Hansie&gt; Cayle: Please explain 1 minute reasoning, say vs. 2 minutes.
1:21 PM &lt;mikethetike&gt; What are our options given that we are merge mined with monero?
1:21 PM &lt;mikethetike&gt; can it be larger than monero’s 2 mins?
1:21 PM &lt;simian_za&gt; It should be fairly simple to model a block size vs mean propagation time that determine the rates of oprhan blocks and forks caused by the longer latencies
1:21 PM &lt;Hansie&gt; Can be smaller, equal or larger
1:21 PM &lt;@cjs77&gt; woah.. http://bitcoinfibre.org/stats_ng.html shows 95% of nodes seeing a block in 25ms
1:22 PM &lt;simian_za&gt; Are we linked to moneros block time? We are just using their proof of work
1:22 PM &lt;simian_za&gt; We set our difficulty
1:22 PM &lt;Hansie&gt; Block time can be smaller, equal or larger
1:22 PM &lt;Hansie&gt; It is totally independent to being merged mined
1:24 PM &lt;simian_za&gt; What is the typical traffic on the fibre network to sync mempools?
1:24 PM &lt;@cjs77&gt; hansie: Users of the DAN will be used to things being fast. When the base layer gets involved (e.g. node registration), things slow down considerably. I’m thinking that the difference between a few confirmations at 1min blocks vs 2min blocks will feel like eternity
1:24 PM &lt;@cjs77&gt; node = Validator Node
1:27 PM &lt;@cjs77&gt; Actually I must be reading that graph wrong. It takes ±100ms for light to travel halfway around the world
1:28 PM &lt;simian_za&gt; Typical sustained pings to the US are around 200–400ms
1:28 PM &lt;Hansie&gt; Cayle: Ok so specific use cases of 2nd layer transactions touching the base layer will be on the value system to determine block times. Along with other practical aspects and possible attack vectors.
1:29 PM &lt;mikethetike&gt; trying to catch us out hey @cjs77
1:31 PM &lt;mikethetike&gt; “the time-to-receive a block can be seen as the time taken in excess of the speed of light through fiber”
1:33 PM &lt;@cjs77&gt; ah.. thanks. so 200–350ms ..that’s ridiculously quick. BTC could have 10s blocks with that kind of efficiency :)
1:36 PM &lt;@cjs77&gt; Hansie: yes, I think as fast as we can without orphan rate getting out of hand.
1:37 PM &lt;@cjs77&gt; I’d argue that other things being equal, 1min 500kB blocks &gt; 2min 1MB blocks
1:37 PM &lt;@cjs77&gt; wdyt?
1:38 PM &lt;Hansie&gt; What about an upper limit to the tps?
1:38 PM &lt;simian_za&gt; typical transaction size will be around 1.5kb?
1:38 PM &lt;Hansie&gt; Then block size is dynamic
1:39 PM &lt;@cjs77&gt; “dynamic”, in that it’s not strictly limited. Grin’s weight system is pretty good
1:39 PM &lt;@cjs77&gt; It caps blocks to 1.3–1.5MB depending on what the txs look like
1:40 PM &lt;@cjs77&gt; Monero is dynamic in that the blocks can grow with demand.
1:41 PM &lt;@cjs77&gt; simian_za, how does Beam size their blocks?
1:41 PM &lt;neonknight&gt; At 1.5kb for a typical transaction, it will result in only 5.55 transactions per second.
1:41 PM &lt;simian_za&gt; 500kb 1-minute blocks is still about 7.2 gb a day. What is acceptable on that front?
1:41 PM &lt;Hansie&gt; I think an upper limit to tps, say 100 tps, would be a good upper limit to calculate maximum block size.
1:42 PM &lt;@cjs77&gt; I think you’ll come up with a pretty big number, Hansie
1:42 PM &lt;mikethetike&gt; we have a second layer that increases tps
1:42 PM &lt;Hansie&gt; But it is demand driven, not fixed
1:43 PM &lt;simian_za&gt; sorry am I off by one order of magnitude? its actually 720 meg a day…
1:43 PM &lt;mikethetike&gt; simian_za: only archival nodes will have that size
1:43 PM &lt;Hansie&gt; Just allows higher base layer throughput when needed, without scaling on the base layer
1:46 PM &lt;@cjs77&gt; You can target X tps, but the reality is that we’re limited by network speeds and the efficiency of our implementation. The only real way to check, imho, is to pick a block interval, then start with huge blocks on testnet and then scale back until the orphan rate drops to an acceptable level (±0%)
1:46 PM &lt;Hansie&gt; That would give us a sweet spot yes
1:50 PM &lt;@cjs77&gt; tryna think.. would difficulty &amp; hash rate impact orphan rate? Only if diff is really low, or hashrate is pushing blocks well outside the target interval right?
1:53 PM &lt;Hansie&gt; I think orphan rate could be minimized with efficient communication/propagation, more than anything else. Dynamic difficulty will equalize with hash rate
2:03 PM &lt;@cjs77&gt; This conversation has made me realise something. BTC needs a huge block INTERVAL war, not a block size one :)
2:04 PM &lt;Hansie&gt; :-)
</code></pre></div></div>

        </div>
      </section>

    </div>
  </div>
</div>
</div>

<!-- Call to action Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <a class="btn btn-lg" href="/blog">Back to blog</a>
                </div>
            </div>
        </div>
    </div>
</section>










    <!-- footer Start -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-1">

        <svg class="logo--gem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71.1"><path d="M29.1 0L0 18.9v19.8L28.9 71 70 38.8V18.9L29.1 0zM29.7 8L63 23.4V32L12.7 19 29.7 8zM32.5 31.4l26.8 6.9L32.5 59.3V31.4zM7 24.8l18.5 4.7v27.1L7 36V24.8z"/></svg>

      </div>
      <div class="col-md-5">

        <h1>Built in <strong>Oakland</strong> &amp; <strong>Johannesburg</strong></h1>

        <form id="email_signup" class=" klaviyo_bare_embed_L5CjJF" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
  <input type="hidden" name="g" value="L5CjJF">
  <div class="klaviyo_messages">
    <div class="success_message" style="display:none;"></div>
    <div class="error_message" style="display:none;"></div>
  </div>
  <div class="klaviyo_field_group">
    <label for="k_id_email">Newsletter Sign Up</label>
    <input type="email" value="" name="email" id="k_id_email" placeholder="Enter email" />
  </div>
  <div class="klaviyo_form_actions">
    <button type="submit" class="btn btn-lg klaviyo_submit_button">Submit</button>
  </div>
  <p class="privacy-agreement">By clicking ‘Submit’, you agree to our <a href="/privacy_policy" title="Privacy Policy" target="_blank">Privacy Policy</a>.</p>
</form>
<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>
<script type="text/javascript">
  KlaviyoSubscribe.attachToForms('#email_signup', {
    hide_form_on_success: true
  });
</script>

        <p>Copyright &copy; 2018 Tari Labs, LLC. All rights reserved.<br/>
          <a href="/privacy_policy">Privacy Policy</a>&nbsp;
          <a href="/disclaimer">Disclaimer</a>.
        </p>

      </div>
      <div class="col-md-6">
        <div class="footer-menu clearfix">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs">Docs</a></li>
            <li><a href="https://rfc.tari.com/" target="_blank">Tari RFC</a></li>
            <li><a href="https://www.github.com/tari-project" target="_blank">Source code</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/faq">FAQ</a></li>
          </ul>
        </div>
        <div class="footer-socials">
          <ul class="social-icons">
            <li><a href="https://www.twitter.com/tari" target="_blank"><i class="ion-social-twitter"></i></a></li>
            <li><a href="https://www.facebook.com/tarilabs" target="_blank"><i class="ion-social-facebook"></i></a></li>
            <li><a href="https://www.reddit.com/r/tari" target="_blank"><i class="ion-social-reddit"></i></a></li>
            <li><a href="https://www.github.com/tari-project" target="_blank"><i class="ion-social-github"></i></a></li>
            <li><a href="https://t.me/tarilab" target="_blank"><i class="ion-paper-airplane"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>


    </body>
</html>
