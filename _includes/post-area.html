{% if site.posts.size == 1 %}
  {% capture grid %}clearfix{% endcapture %}
{% elsif site.posts.size == 2 %}
  {% capture grid %}col-xs-12 col-md-6{% endcapture %}
{% else %}
  {% capture grid %}col-xs-12 col-sm-6 col-md-4{% endcapture %}
{% endif %}

<div class="post-area {{ grid }} js-stagger-delay-post-panel js-add-class-in-view {% if site.posts.size == 1 %}single{% endif %}" data-in-view-count="1" data-in-view-offset="75%">
  <div class="post-wrapper clearfix">
    <div class="post-img {% if site.posts.size == 1 %}col-md-6{% endif %}">
      <a href="{{ post.url | prepend: site.baseurl }}">
        <img src="{{ site.baseurl }}/img/posts/placeholder-spacer.gif" />
      </a>
    </div>
    <div class="post-content {% if site.posts.size == 1 %}col-md-6{% endif %}">
      <h3 class="post-title"><a href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a></h3>
      <div class="post-meta">
        {% if post.author %}<strong class="post-author">{{ post.author }}</strong>{% endif %}
        <p class="post-date">{{ post.date | date: '%B %d, %Y' }}</p>
      </div>
      <div class="post-lead">
        <p>
          {{ post.lead | strip_html }}
        </p>
        <a class="btn" href="{{ post.url | prepend: site.baseurl }}">Read more</a>
      </div>
    </div>
    <div class="post-background">
      <div class="post-img {% if site.posts.size == 1 %}col-md-6{% endif %}" style="background-image:url({% if post.thumbnail %}{{ site.baseurl }}/{{ post.thumbnail }}{% else %}{{ site.baseurl }}/img/posts/placeholder-thumbnail.jpg{% endif %})">
        <img src="{{ site.baseurl }}/img/posts/placeholder-spacer.gif" />
      </div>
    </div>
  </div>
</div>

{% assign mod = forloop.index | modulo: 2 %}
{% if mod == 0 %}
<div class="clearfix visible-xs-block"></div>
{% endif %}

{% assign mod = forloop.index | modulo: 3 %}
{% if mod == 0 %}
<div class="clearfix visible-sm-block visible-md-block visible-lg-block"></div>
{% endif %}